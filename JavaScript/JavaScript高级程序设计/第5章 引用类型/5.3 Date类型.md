# 5.3 Date类型

- JS中的Date类型使用自UTC 1970年1月1日零时开始经过的毫秒数来保存日期。
  - 要创建一个日期对象，使用new操作符和Date构造函数即可。
    `var now = new Date();`
- 在调用Date构造函数而不传参数的情况下，新创建的对象自动获得当前日期和时间。
- 如果想根据特定的日期和时间创建日期对象，必须传入表示该日期的毫秒数。
  - 为了简化这一计算过程，JS提供了两个方法: Date.parse()和Date.UTC()。
    - Date.parse()方法接收一个表示日期的字符串参数，然后尝试根据这个字符串返回相应日期的毫秒数。
      - 将地区设置为美国的浏览器通常都接受下列日期格式:
        - “月/日/年”，如 6/13/2004；
        - “英文月名 日,年”，如 January 12,2004；
        - “英文星期几 英文月名 日 年 时:分:秒 时区”，如 Tue May 25 2004 00:00:00 GMT-0700。
        - ISO 8601 扩展格式 YYYY-MM-DDTHH:mm:ss.sssZ（例如 2004-05-25T00:00:00）。只有兼容ECMAScript 5 的实现支持这种格式。
      - 如果传入Date.parse()方法的字符串不能表示日期，那么它会返回NaN。实际上直接将表示日期的字符串传递给Date构造函数，也会在后台调用Date.parse()。
    - Date.UTC()方法同样也返回表示日期的毫秒数。
      - 但是Date.UTC()与Date.parse()在构建值时使用不同的信息。
      - Date.UTC()的参数分别是年份、基于0的月份（一月是0，二月是1，以此类推）、1到31之中的天数日期、小时数（0到23）、分钟、秒以及毫秒数。
        - 年和月是必需的，没有提供天数日期则假设天数为1；如果省略其他参数，则统统假设为0。
        ```js
        //GMT时间2000年1月1日午夜零时
        var y2k = new Date(Date.UTC(2000, 0));

        //GMT时间2005年5月5日下午5:55:55
        var allFives = new Date(Date.UTC(2005, 4, 5, 17, 55, 55));
        ```
        - Date构造函数也会模仿Date.UTC()，但是日期和时间都基于本地时区而非GMT来创建，不过构造函数接收的参数仍与Date.UTC()相同。
          - 如果第一个参数是数值，Date构造函数就会假设该值是日期中的年份，而第二个参数是月份，以此类推。
          ```js
          // 本地时间2000年1月1日午夜零时
          var y2k = new Date(2000, 0);

          // 本地时间2005年5月5日下午5:55:55
          var allFives = new Date(2005, 4, 5, 17, 55, 55);
          ```
          - 上面代码创建了与前面例子中相同的两个日期对象，但是这次的日期都是基于系统设置的本地时区创建的。
  - ES5添加了Date.now()方法，返回表示调用这个方法时的日期和时间的毫秒数。
    - 这个方法简化了使用Date对象分析代码的工作。
    - 在不支持它的浏览器中，使用+操作符把Date对象转换成字符串，也可以达到同样的目的。

## 5.3.1 继承的方法

- 与其他引用类型一样，Date类型也重写了toLocaleString()、toString()和valueOf()方法。
  - 这些方法返回的值与其他类型中方法不同。
  - Date类型的toLocaleString()方法会按照与浏览器设置的地区相适应的格式返回日期和时间。具体格式因浏览器而异。
  - toString()方法通常返回带有时区信息的日期和时间。
  - valueOf()方法根本不返回字符串，而是返回日期的毫秒表示，可以方便使用比较操作符来比较日期值。

## 5.3.2 日期格式化方法

- Date类型还有一些专门用于将日期格式化为字符串的方法，如下：
  - toDateString()---以特定与实现的格式显示星期几、月、日和年；
  - toTimeString()---以特定于实现的格式显示时、分、秒和时区；
  - toLocaleDateString()---以特定于地区的格式显示星期几、月、日和年；
  - toLocaleTimeString()---以特定于实现的格式显示时、分、秒；
  - 以上这些字符串格式方法的输出也是因浏览器而异。
> 还有一个名叫toGMTString()的方法，这个方法与toUTCString()等价，存在目的在于确保向后兼容。

## 5.3.3 日期/时间组件方法

- 剩下还未介绍的Date类型的方法都是直接取得和设置日期值中特定部分的方法。
- UTC日期指的是在没有时区偏差的情况下，将日期转换为GMT时间的日期值。

| 方法 | 说明 |
| :-: | :-: |
| getTime() | 返回表示日期的毫秒数；与valueOf)()方法返回的值相同 |
| setTime(毫秒) | 以毫秒数设置日期，会改变整个日期 |
| getFullYear() | 取得4位数的年份（如2007而非仅07） |
| getUTCFullYear() | 返回UTC日期的4位数年份 |
| setFullYear(年) | 设置日期的年份。传入的年份值必须是4位数字 |
| setUTCFullYear(年) | 设置UTC日期的年份。传入的年份值必须是4位数字 |
| getMonth() | 返回日期中的月份，其中0表示1月，11表示12月 |
| getUTCMonth() | 返回UTC日期中的月份，其中0表示1月，11表示12月 |
| setMonth(月) | 设置日期的月份。传入的月份值必须大于0，超过11则增加年份 |
| setUTCMonth(月) | 设置UTC日期的月份。传入的月份值必须大于0，超过11则增加年份 |
| getDate() | 返回日期月份中的天数（ 1到31） |
| getUTCDate() | 返回UTC日期月份中的天数（ 1到31） |
| setDate(日) | 设置日期月份中的天数。如果传入的值超过了该月中应有的天数，则增加月份 |
| setUTCDate(日) | 设置UTC日期月份中的天数。如果传入的值超过了该月中应有的天数，则增加月份 |
| getDay() | 返回日期中星期的星期几（其中0表示星期日， 6表示星期六） |
| getUTCDay() | 返回UTC日期中星期的星期几（其中0表示星期日， 6表示星期六） |
| getHours() | 返回日期中的小时数（ 0到23） |
| getUTCHours() | 返回UTC日期中的小时数（ 0到23） |
| setHours(时) | 设置日期中的小时数。传入的值超过了23则增加月份中的天数 |
| setUTCHours(时) | 设置UTC日期中的小时数。传入的值超过了23则增加月份中的天数 |
| getMinutes() | 返回日期中的分钟数（ 0到59） |
| getUTCMinutes() | 返回UTC日期中的分钟数（ 0到59） |
| setMinutes(分) | 设置日期中的分钟数。传入的值超过59则增加小时数 |
| setUTCMinutes(分) | 设置UTC日期中的分钟数。传入的值超过59则增加小时数 |
| getSeconds() | 返回日期中的秒数（ 0到59） |
| getUTCSeconds() | 返回UTC日期中的秒数（ 0到59） |
| setSeconds(秒) | 设置日期中的秒数。传入的值超过了59会增加分钟数 |
| setUTCSeconds(秒) | 设置UTC日期中的秒数。传入的值超过了59会增加分钟数 |
| getMilliseconds() | 返回日期中的毫秒数 |
| getUTCMilliseconds() | 返回UTC日期中的毫秒数 |
| setMilliseconds(毫秒) | 设置日期中的毫秒数 |
| setUTCMilliseconds(毫秒) | 设置UTC日期中的毫秒数 |
| getTimezoneOffset() | 返回本地时间与UTC时间相差的分钟数。例如，美国东部标准时间返回300。在某地进入夏令时的情况下，这个值会有所变化 |