# 5.6 基本包装类型

- JS为了便于操作基本类型，还提供了3个特殊的引用类型:Boolean、Number和String。
  - 这些类型与本章介绍的其他引用类型相似，但同时也具有与各自的基本类型相应的特殊行为。
    - 每当读取一个基本类型值的时候，后台就会创建一个对应的基本包装类型的对象，从而让我们能够调用一些方法来操作这些数据。
    - 基本类型值不是对象，从逻辑上不应该有方法，但它们确实有方法。访问包含基本类型值的变量时，访问过程处于一种读取模式，会从内存中读取这个基本类型(String、Number和Boolean)的值。
      - 在读取模式中访问基本类型值时，后台都会自动完成下列处理。
          1. 创建String类型的一个实例；
          2. 在实例上调用指定的方法；
          3. 销毁这个实例。
    - 引用类型与基本包装类型的主要区别就是对象的生存期。使用new操作符创建的引用类型的实例，在执行流离开当前作用域之前都一直保存在内存中。
      - 而自动创建的基本包装类型的对象，则只存在于一行代码的执行瞬间，然后立即被销毁。
      - 我们不能在运行时为基本类型值添加属性和方法。
      - 可以显示地调用Boolean、Number和String来创建基本包装类型的对象。
        - 但这种做法很容易让人分不清自己是在处理基本类型还是引用类型的值，应该在绝对必要的情况下再这样做。
          - 对基础包装类型的实例调用typeof会返回"object"，而且所有基本包装类型的对象都会被转换为布尔值true。
              ```js
              var falseObject = new Boolean(false);
              var result = falseObject && true;//true

              var falseValue = false;
              result = falseValue && true;  //false

              console.log(typeof falseObject);  //object
              console.log(typeof falseValue);  //boolean
              console.log(falseObject instanceof Boolean);  //true
              console.log(falseValue instanceOf Boolean);  //false
              ```
          > 围绕原始数据类型创建一个显示包装器对象从ES6开始不再被支持，现有的原始包装器对象因为遗留原因仍可被创建。
      - Object构造函数也会像工厂方法一样，根据传入值的类型返回相应基本包装类型的实例。
        ```js
        var obj = new Object("some text");
        console.log(obj instanceof String)  //true
        ```
      - 把字符串传给Object构造函数，就会创建String的实例；而传入数值参数会得到Number的实例，传入布尔值参数就会得到Boolean的实例。
        - 使用new调用基本包装类型的构造函数，与直接调用同名的转型函数是不一样的。
          ```js
          var value = "25";
          var number = Number(value);  //转型函数
          alert(typeof number);  //"number"
          var obj = new Number(value);  //构造函数
          alert(typeof obj);  //"object"
          ```

## 5.6.1 Boolean类型

- Boolean类型是与布尔值对应的引用类型。要创建Boolean对象，可以直接调用Boolean构造函数并传入true或false值。
  - Boolean类型的实例重写了valueOf()方法，返回基本类型值true或false；重写了toString()方法,返回字符串"true"和"false"。
    - 但Boolean对象在JS中的用处不大，它经常让人造成误解。
      ```js
      var falseObject = new Boolean(false);
      var result = falseObject && true;
      console.log(result);  //true

      var falseValue = false;
      result = falseValue && true;
      console.log(result);  //false
      ```
      - 上面这种情况是因为对象在布尔表达式中代表的是true，所以即使它的值是false,但这个对象还是被转换为了true。
  - 基本类型与引用类型的布尔值还有两个区别:
      1. typeof操作符对基本类型返回"boolean",而对引用类型返回"object"。
      2. 由于Boolean对象是Boolean类型的实例，所以使用instanceof操作符测试Boolean对象会返回true，而测试基本类型的布尔值则返回false。
  - 建议永远不要使用Boolean对象。

## 5.6.2 Number类型

- Number是与数字值对应的引用类型，要创建Number对象，可以在调用Number构造函数时向其传递相应的数值。
- Number类型也重写了valueOf()、toLocaleString()和toString()方法。
  - 重写后的valueOf()方法返回对象表示的基本类型的数值，另外两个方法返回字符串形式的数值。
  - 可以为toString()方法传递一个表示基数的参数，告诉它返回几进制数值的字符串形式。
  - 除了继承的方法之外，Number类型还提供了一些用于将数值格式化为字符串的方法，其中toFixed()方法会按照指定的小数位返回数值的字符串表示.
