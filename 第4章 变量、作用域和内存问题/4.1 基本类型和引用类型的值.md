# 4.1 基本类型和引用类型的值

> JS变量松散类型的本质，决定了它只是在特定时间用于保存特定值的一个名字而已，由于不存在定义某个变量必须要保存何种数据类型值的规则，变量的值及其数据类型可以在脚本的生命周期内改变。

- JS变量可能包含两种不同数据类型的值:基本类型值和引用类型值。
  - **基本类型值**指的是简单的数据段，而**引用类型值**指那些可能由多个值构成的对象。
  - 将一个值赋给变量时，解析器必须确定这个值是基本类型值还是引用类型值。
    - Undefined、Null、Boolean、Number和String这5种基本数据类型是按值访问的，它们可以操作保存在变量种的实际的值。
  - 引用类型的值是保存在内存中的对象，JS不允许直接访问内存中的位置。
    - 不能直接操作对象的内存空间，在操作对象时，实际上是在操作对象的引用。
    - 当复制保存着某个对象的某个变量时，操作的时对象的引用，但在为对象添加属性时，操作的是实际的对象。

## 4.1.1 动态的属性

- 定义基本类型值和引用类型值的方式是类似的: 创建一个变量并为该变量赋值。
  - 当值保存到变量中以后，对不同类型的值可以执行的操作是大不相同的:
    - 对于引用类型的值，可以为其添加属性和方法，也可以改变和删除其属性和方法。
> 不能给基本类型的值添加属性，虽然这样做不会导致任何错误。

## 4.1.2 复制变量值

- 除了保存的方式不同，在从一个变量向另一个变量赋值基本类型值和引用类型值时，也存在不同。
  - 从一个变量向另一个变量复制基本类型的值，会在变量对象上创建一个新值，然后把该值复制到新变量分配的位置上。
    - 这两个变量可以参与任何操作而不会相互影响。
  - 从一个变量向另一个变量复制引用类型的值时，同样也会将存储在变量对象中的值复制一份放到新变量分配的空间中。
    - 这个值的副本实际上是一个指针，指向存储在堆中的一个对象。
    - 复制操作结束后，两个变量实际上将引用同一个对象。
    - 改变其中一个变量，就会影响到另一个变量。

## 4.1.3 传递参数

- JS中所有函数的参数都是按值传递的，把函数外部的值复制给函数内部的参数，就和把值从一个变量复制到另一个变量一样。
  - 基本类型值的传递如同基本类型变量的复制一样。
  - 引用类型值的传递就像引用类型变量的复制一样。

- 访问变量有按值和按引用两种方式，而参数只能按值传递。

- 在向参数传递基本类型的值时，被传递的值会被复制给一个局部变量(即命名参数，或者说是arguments对象中的一个元素)。
  - 在向参数传递引用类型的值时，会把这个值在内存中的地址复制给一个局部变量。
> 可以把JS函数的参数想象成局部变量。

## 4.1.4 检测类型

- typeof操作符是确定一个变量是字符串、数值、布尔值还是undefined的最佳工具。
  - 如果变量的值是一个对象或null，则typeof会返回"object"。

- 可以用instanceof操作符来检测一个变量是什么类型的对象。

  `result = variable instanceof constructor`

- 如果变量是给定引用类型(根据它的原型链来识别)的实例，那么instanceof操作符就会返回true。
  - 所有引用类型的值都是Object的实例，在检测一个引用类型值和Object构造函数时，instanceof操作符始终会返回true。
    - 如果使用instanceof操作符检测基本类型的值，则该操作符始终会返回false，因为基本类型不是对象。
